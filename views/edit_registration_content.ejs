<div class="container my-5">
    <h1 class="mb-4 text-center">Update Registration</h1>

    <form action="/registration/<%= registration.Participant_ID %>/<%= registration.Event_ID %>/<%= encodeURIComponent(registration.EventDateTimeStart) %>/edit" method="POST" class="card p-4 shadow-sm">

        <!-- Hidden inputs -->
        <input type="hidden" id="participantID" name="Participant_ID" value="<%= registration.Participant_ID %>">
        <input type="hidden" id="eventID" name="Event_ID" value="<%= registration.Event_ID %>">
        <input type="hidden" id="startTime" name="EventDateTimeStart" 
        value="<%= registration.EventDateTimeStart ? new Date(registration.EventDateTimeStart).toISOString().slice(0,16) : '' %>">

        <div class="row mb-3">
            <label for="status" class="form-label">Registration Status</label>
            <input type="text" class="form-control" id="status" name="RegistrationStatus" value="<%= registration.RegistrationStatus %>" required>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label for="attended" class="form-label">Attended?</label>
                <select class="form-select" id="attended" name="RegistrationAttendedFlag">
                    <option value="true" <%= registration.RegistrationAttendedFlag ? 'selected' : '' %>>Yes</option>
                    <option value="false" <%= !registration.RegistrationAttendedFlag ? 'selected' : '' %>>No</option>
                </select>
            </div>
            <div class="col-md-6">
                <label for="checkInTime" class="form-label">Check-in Time</label>
                <input type="datetime-local" class="form-control" id="checkInTime" name="RegistrationCheckInTime" 
                    value="<%= registration.RegistrationCheckInTime ? new Date(registration.RegistrationCheckInTime).toISOString().slice(0,16) : '' %>">
            </div>
        </div>

        <div class="mb-3">
            <label for="createdAt" class="form-label">Created At</label>
            <input type="datetime-local" class="form-control" id="createdAt" name="RegistrationCreatedAt" 
                value="<%= registration.RegistrationCreatedAt ? new Date(registration.RegistrationCreatedAt).toISOString().slice(0,16) : '' %>" readonly>
        </div>

        <div class="d-flex justify-content-center gap-3 mt-4">
            <button type="submit" class="btn btn-primary px-5">Update Registration</button>
            <a href="/participants" class="btn btn-secondary px-5">Cancel</a>
        </div>
    </form>
</div>


<style>
    .card {
        max-width: 800px;
        margin: auto;
    }
    
    .form-label {
        font-weight: 500;
    }
</style>