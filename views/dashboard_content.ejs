<div class="container mt-5">

  <h2 class="mb-4 text-center">Participant Stats</h2>

  <% if (milestones && milestones.length > 0) { %>
    <!-- Search bar -->
    <div class="mb-3">
      <input type="text" id="searchInput" class="form-control" placeholder="Search by any field">
    </div>

    <div style="max-height: 400px; overflow-y: auto;">
      <table class="table table-striped table-bordered" id="participantTable">
        <thead>
          <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Milestone Title</th>
            <th>Milestone Date</th>
          </tr>
        </thead>
        <tbody>
          <% milestones.forEach(milestone => { %>
            <tr>
              <td><%= milestone.ParticipantFirstName %></td>
              <td><%= milestone.ParticipantLastName %></td>
              <td><%= milestone.MilestoneTitles %></td>
              <td><%= milestone.MilestoneDates %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

  <% } else { %>
    <div class="alert alert-info text-center">
      No milestones available.
    </div>
  <% } %>

  <!-- Add Milestone button -->
  <div class="mt-3">
    <a href="/add_milestone" class="btn btn-primary">Add Milestone</a>
  </div>

  <!-- Dashboard div -->
  <div id="dashboard" class="mt-5" style="height: 500px; border: 1px solid #ccc;">
    <!-- Additional dashboard content can be embedded here -->
  </div>

</div>

<!-- Client-side search script -->
<script>
  const searchInput = document.getElementById('searchInput');
  if (searchInput) {
    searchInput.addEventListener('keyup', function() {
      const filter = this.value.toLowerCase();
      const rows = document.querySelectorAll('#participantTable tbody tr');

      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(filter) ? '' : 'none';
      });
    });
  }
</script>


